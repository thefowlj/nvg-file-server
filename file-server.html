<!DOCTYPE html>
<html>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
const TABLE_ELEMENT = '#fTable';

let fileData = null;

function init() {
  $.getJSON('api/files', (data) => {
    fileData = data;
    createFileList();
  });
}

function createFileList() {
  if(fileData.files.length > 0) {
    $('body').prepend('<h1>Files</h1>')
  } else {
    $('body').prepend('<h2>No Files Available</h2>')
  }
  fileData.files.forEach((value) => {
    $(TABLE_ELEMENT).append(
      `<tr>
      <td><a href='${fileData.route}${value}'>${value}</a></td>
      <td><a href='${fileData.delete}${value}'><button type='button'>Remove</button></a></td>
      </tr>`
    );
  });
}

</script>
<body onload="init()">
  <table>
    <tbody id="fTable">
    </tbody>
  </table><br>
  <br>
  <h2>Upload</h2>
  <form action="api/upload" method="post" enctype="multipart/form-data">
    <input type="file" name="filetoupload"><br>
    <input type="submit">
  </form>
</body>
</html>
